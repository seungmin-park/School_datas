# 중간고사 대비 판다스 정리

### 데이터 프레임 생성

1. 딕셔너리를 통한 생성 방법
   
> pandas.DataFrame(dict_data)

```python
import padads as pd

dict_data = {'e1' : [1,2,3],'e2' : [4,5,6],'e3' : [7,8,9]}

pd.DataFrame(dict_data)
```

2. 리스트 + 행, 열 인덱스 지정 방법
   
>pandas.DataFrame([[list_data1], [list_data2]...], index = [v1, v2..], columns = [v1, v2..])

```python
import pandas as pd

pd.DataFrame([
    [22, '남', '피아노'],
    [23, '여', '산책']
],
index = ['우석', '나라'],
columns = ['나이','성별','취미']
)
```

### 행과 열 인덱스 변경

1. 행 인덱스 변경

> DataFrame.index = [v1, v2 ...]

```python
df.index = ['student1', 'student2']
```

현재 데이터프레임에 존재하는 행의 개수보다 많거나 적은 value로 변경 시도 시 오류 발생

2. 열 인덱스 변경

> DataFrame.columns = [v1, v2 ...]

```python
df.columns = ['age', 'school', 'hobby']
```

현재 데이터프레임에 존재하는 열의 개수보다 많거나 적은 value로 변경 시도 시 오류 발생

3. rename 함수 사용

> DataFrame.rename(index = {old1 : new1, old2 : new2...}, columns = {old1 : new1, old2 : new2...}, inplace = False)

```python
df.rename(
    index = {'student1' : 'data1', 'student2' : 'data2'},
    columns = {'age' : 'feat1','school' : 'feat3','hobby' : 'feat3'}
    inplace=True
    )
```

rename 함수는 기존의 행 인덱스나 열 인덱스를 새로운 인덱스 값으로 변경된 데이터프레임을 반환하므로 원본 객체는 변경되지 않는다.
변경된 데이터 프레임으로 추가적으로 작업을 원할 경우 반환된 데이터프레임을 새로운 변수에 저장하거나 `inplace` 속성의 True로 지정해 원본 객체를 변경해야된다.
기본 값은 false이다.

### 행/열 삭제

1. 행 삭제
> DataFrame.drop(value, axis=0, inplace=Fasle) or
>
> DataFrame.drop([value1, value2...], axis=0, inplace=Fasle)
> 
> `default Vaue = axis=0, inplace=False`

```python
df.drop('우석')
df.drop(['우석', '나라', '민정'])
```

없는 데이터 삭제 시도시 오류 발생, drop 함수는 해당 인덱스의 값이 삭제된 데이터프레이믈 반환하며 원본 데이터 프레임은 변경되지 않는다. 원본 데이터의 변경을 원할 경우 `inplace` 의 값을 `True`로 지정해주면 된다.

2. 열 삭제
> DataFrame.drop(value, axis=1, inplace=Fasle) or
> DataFrame.drop([value1, value2...], axis=1, inplace=Fasle)
>

```python
df.drop('나이', axis=1)
df.drop(['나이', '취미'], axis=1)
```

열 데이터를 삭제하기 위해서는 반드시 `axis`의 값을 1로 지정해줘야 된다. 없는 데이터 삭제 시도시 오류 발생, drop 함수는 해당 인덱스의 값이 삭제된 데이터프레이믈 반환하며 원본 데이터 프레임은 변경되지 않는다. 원본 데이터의 변경을 원할 경우 `inplace` 의 값을 `True`로 지정해주면 된다.

### 행/열 선택

1. 행 선택

> DataFrame.loc[value] or DataFrame.loc[[value1, value2...]] or DataFrame.loc[value1 : vaue2]
> 
> or
> 
> DataFrame.iloc[value] or DataFarme.iloc[[value1, value2...]] or DataFrame.iloc[value1 : value2]

```python
df.loc['우석']
df.loc['우석' : '나라']
df.loc[['우석','인아','나라']]

df.iloc[0]
df.iloc[0 : 2]
df.iloc[[0,2]]
```

행을 선택할 때는 행의 인덱스 값을 지정하는 방식과 순서를 지정하는 방식이 있다. 인덱스의 값으로 지정하고 싶을 경우 loc 함수를, 순서로 지정하고 싶을 경우는 iloc 함수를 사용하면 된다. 두 함수 모두 하나의 행만 선택할 경우 하나의 요소만 값을 선택(`[value]`)하면 되고 복수 개의 행을 선택할 경우는 리스트로 원하는 요소들의 값(`[[value1, value2...]]`)을 넘겨주면 된다. 그리고 단순하게 많지안은 요소의 개수를 복수로 선택하는 것이 아닌 범위를 지정해 해당 범위에 해당하는 행을 가저오길 원할 경우 `:` 을 이용해 범위를 지정(`[value1 : value2]`)해주면 된다.

여기서 주의할 부분은 바로 범위로 지정하는 경우이다.

우선 범위를 앞에오는 값이 뒤에 있는 값보다 작을 경우(먼저 올 경우) 오류가 발생하지는 않지만 어떠한 값도 선택되지 않는다. 그리고 iloc를 사용해 순서로 범위를 지정할 경우 범위에 마지막 부분은 값이 포함되지 않는다.

**iloc 범위 지정**

||나이|구분|취미|학교|
|:-:|:-:|:-:|:-:|:-:|
|우석|17|고등|독서|선경|
|인아|14|중등|산책|한국|
|나라|12|중등|축구|우성|
|민정|19|고등|독서|효성|
|서준|15|중등|농구|성성|

위와 같은 데이터 프레임 `df`가 존재할 경우 iloc를 통해 범위로 여러 행들을 추출하는 상황을 살펴보자

```python
#(1)
df.iloc[0:1]
#(2)
df.iloc[0:5]
#(3)
df.iloc[2:4]
```

#(1)

||나이|구분|취미|학교|
|:-:|:-:|:-:|:-:|:-:|
|우석|17|고등|독서|선경|

#(2)

||나이|구분|취미|학교|
|:-:|:-:|:-:|:-:|:-:|
|우석|17|고등|독서|선경|
|인아|14|중등|산책|한국|
|나라|12|중등|축구|우성|
|민정|19|고등|독서|효성|
|서준|15|중등|농구|성성|

#(3)

||나이|구분|취미|학교|
|:-:|:-:|:-:|:-:|:-:|
|나라|12|중등|축구|우성|
|민정|19|고등|독서|효성|

2. 열 선택

> DataFrame[value] or DataFrame.value
>
>or
>
> DataFrame[[value1, value2...]] or DataFarme[value1 : value2]

```python
df['학교']
df.[['나이', '학교']]
```

### 원소 선택

원소를 선택하는 경우는 loc 함수나 iloc 함수를 사용해 선택하고 싶은 부분의 행과 열을 기존에 행과 열을 지정하는 방식을 통해서 추출하면 된다.

1. 하나의 원소 선택

```python
df.loc['우석', '나이'] # loc 함수를 통해 행과 열의 값 동시 선택
df.loc['우석']['나이'] # loc 함수를 통해 행의 값을 선택 후 열의 값을 선택
df.loc['우석'][0] # loc 함수를 통해 행의 값을 선택 후 열의 인덱스 선택

df.iloc[0,0] # iloc 함수를 통해 행과 열을 인덱스를 동시 선택
df.iloc[0][0] # iloc 힘수를 통해 행의 인덱스를 선택후 열 인덱스 선택
df.iloc[0]['나이'] # iloc 함수를 통해 행의 인데스를 선택 후 원하는 열의 값을 선택
```

2. 복수개의 원소 선택

   - 시리즈 형식

    ```python
    df.loc['우석', ['나이', '학교']]
    df.loc['우석'][['나이', '학교']]

    df.loc['우석', '나이' : '학교']
    df.loc['우석']['나이' : '학교']


    df.iloc[0, [0,3]]
    df.iloc[0][[0,3]]

    df.iloc[0, 0:3]
    df.iloc[0][0:3]
    ```
  
   - 데이터 프레임 형식

   ```python
   df.loc[['우석', '나라'], ['나이', '학교']]
   df.loc[['우석', '나라']][['나이', '학교']]

   df.loc[['우석', '나라'], '나이' :'학교']


   df.loc['우석':'나라', ['나이', '학교']]
   df.loc['우석':'나라'][['나이', '학교']]

   df.loc['우석' : '나라', '나이' : '학교']


   df.iloc[[0, 2], [0, 3]]
   df.iloc[[0, 2]][[0, 3]]

   df.iloc[[0, 2], 0 :3]


   df.iloc[0:2, [0, 3]]
   df.iloc[0:2][[0, 3]]

   df.iloc[0 : 2, 0 : 3]
   ```

### 원소 값 변경하기

```python
df.loc['서준']['체육'] = 90
df.loc['서준',['음악','체육']] = 100, 50
```

### 행/열 추가

1. 행 추가

> DataFreme.loc[value] = datas

```python
df.loc[3] = 0
df.loc[4] = ['동규', 90, 80, 70]
df.loc['5번'] = df.loc[3]
```

1. 열 추가

> DataFrame[value] = data

```python
df['인문'] = df['국어'] + df['영어']
df['수학'] = 50
```

```
> DataFrame.transpose() 명령어를 통해 행과 열의 위치를 변경할 수 있음
```

### 인덱스 활용

1. 행 인덱스 설정

> DataFrame.set_index([columns_values])

데이터 프레임에서 행 인덱스로 지정하고 싶은 열을 기존에 열 선택 방식을 통해 `set_index`에 prameter로 넘겨주면 된다.

```python
df.set_index(['나이'])
df.set_index(['나이', '학교'])
```

2. 행 인덱스 초기화

> DataFrame.reset_index(inplace=False)

기존에 데이터 프레임에 지정되어있던 행 인덱스를 정수형 인덱스로 초기화해 반환하므로 기존의 데이터를 변경하고 싶을 경우 prameter에 `inplace=True`를 넘겨주면 된다.

```python
rdf = df.reset_index()
df.reset_index(inplace=True)
```

### 정렬

1. 행 인덱스를 기준으로 정렬

> DataFrame.sort_index(ascending=False)

2. 열 인덱스를 기준으로 정렬

> DataFrame.sort_value(by = key, ascending=False)

두 경우 모두 오름차순으로 정렬하고 싶을 경우 `ascending`을 `True`로 설정하면 된다. 그리고 열 인덱스 기준으로 정렬할 경우 정렬 기준을 `by`로 지정하면 된다.